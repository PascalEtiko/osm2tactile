{% extends 'base.html' %}

{% block title %}osm2tactile{% endblock %}

{% block css %}
{% endblock %}

{% block content %}
  <div class="osm2tactile">
    <h1>osm2tactile</h1>
    <p>
      Mapnik version: {{ mapnik_version }}
    </p>
    <p>
      Map center coordinates: {{ lat }}, {{ lon }}
    </p>
    <p>
      Map bounding box coordinates: {{ lat + dy }}, {{ lon - dx }} - {{ lat - dy }}, {{ lon + dx }}
    </p>
    <img src="{{ url_for('static', filename=map_img)}}" alt="street map with the center at {{ lat }}, {{ lon }}" />
    <div class="map-description">
      <h2>Auto generated map description</h2>
      <h3>Streets</h3>
      {% for street in streets|sort(attribute="name") %}
        {% if loop.first %}
          <ul>Following streets are on this map:
        {% endif %}
            <li>{{ street.name }}</li>
        {% if loop.last %}
          </ul>
        {% endif %}
      {% else %}
        <p>No street names found on map</p>
      {% endfor %}
      <h3>Public transport</h3>
      {% for public_transport in public_transports|sort(attribute="name") %}
        {% if loop.first %}
          <ul>Following public transport stations are on this map:
        {% endif %}
          <li>{{ public_transport.name }}{% if public_transport.name != point_lines[public_transport.osm_id] %}/{{point_lines[public_transport.osm_id]}}{% endif %}
            {% if public_transport.operator %} ({{ public_transport.operator }}){% endif %}</li>
        {% if loop.last %}
          </ul>
        {% endif %}
      {% else %}
        <p>No street names found on map</p>
      {% endfor %}
      <h3>Points of interest</h3>
      {% for point in points|sort(attribute="name") %}
        {% if loop.first %}
          <ul>Following points of interest are on this map:
        {% endif %}
            <li>{{ point.name }} {{ point_lines[point.osm_id]}}{% if point['addr:housenumber'] %} {{ point['addr:housenumber'] }}{% endif %}</li>
        {% if loop.last %}
          </ul>
        {% endif %}
      {% else %}
        <p>No street names found on map</p>
      {% endfor %}
    </div>
  </div>
{% endblock%}

{% block scripts %}
{% endblock%}
